# 3SNET events widget: Playwright autotest

Репозиторий содержит end-to-end тесты для страницы конструктора календаря мероприятий:
`https://dev.3snet.info/eventswidget/`

## Что покрывает тест

Тестовый набор (`/tests/eventswidget.spec.js`) проверяет:

- успешную загрузку страницы и корректный заголовок (`title`);
- отображение ключевого UI конструктора (главный заголовок, селекты тематики и стран);
- наличие и базовую валидность сгенерированного `iframe`-кода;
- изменение параметров блока (ширина/высота) и обновление кода после нажатия `Сгенерировать превью`.

## Структура проекта

Проект построен по POM паттерну, изначально я сделал по более простой модели, но решил переделать как если бы это был большой проект с залогом на будущее:

- `pages/EventWidgetPage.js` - Page Object с локаторами и переиспользуемыми действиями (`open`, `setFixedSize`, `generatePreview`);
- `fixtures/eventswidget.data.js` - вынесенные тестовые данные и ожидаемые значения;
- `tests/eventswidget.spec.js` - сценарии тестов, читаемые на уровне бизнес-поведения.

## Наблюдения по странице

- поле с кодом (`textarea#code`) уже заполнено даже до нажатия `Сгенерировать превью`;
- в конструкторе используются чекбоксы `full-width` и `auto-height`, которые влияют на итоговые `width`/`height` в `iframe`, поэтому в тесте они явно отключаются перед проверкой фиксированных размеров.

## Стек

- Node.js
- Playwright (`@playwright/test`)
- JavaScript

## Локальный запуск

1. Установить зависимости:

```bash
npm install
```

2. Запустить тест одной командой (браузер `chromium` будет установлен автоматически при необходимости):

```bash
npm test
```

## Полезные команды

```bash
npm run test:headed   # запуск с UI браузера
npm run test:report   # открыть HTML-отчёт
```

## Примечание по актуальности

Последний прогон тестов и обновление репозитория: 17 февраля 2026.
